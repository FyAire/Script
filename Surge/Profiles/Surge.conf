[General]
# --- å¢å¼ºç‰ˆ Wi-Fi åŠ©ç† ---
# > ä»… iOSï¼Œåœ¨ Wi-Fi ç½‘ç»œä¸ä½³æ—¶å°è¯•ä½¿ç”¨æ•°æ®ç½‘ç»œå»ºç«‹è¿æ¥
wifi-assist = true

# --- Latency Benchmark ---
# > Internet æµ‹è¯• URL
internet-test-url = http://baidu.com
# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://www.gstatic.com/generate_204
# > æµ‹é€Ÿè¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 5

# --- GeoIP ---
# > è‡ªå®šä¹‰ GeoIP æ•°æ®åº“
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb // IPv6å¯èƒ½å­˜åœ¨é—®é¢˜

# --- IPv6 ---
# > å¼€å¯ IPv6 ä¼šè®© Surge åŒæ—¶è¯·æ±‚åŸŸåçš„ A ä¸ AAAA è®°å½•ï¼Œè¿™å¯èƒ½ç•¥å¾®çš„å¢åŠ å»¶è¿Ÿã€‚è‹¥ DNS æœåŠ¡å™¨æ— æ³•æ­£ç¡®å“åº” AAAA æŸ¥è¯¢ï¼Œåˆ™å¯èƒ½å¯¼è‡´ä¸¥é‡çš„å¡é¡¿ï¼Œä»…åœ¨éœ€è¦æ—¶å¼€å¯
ipv6 = false

# --- WWi-Fi ACCESS ---
# > Surge å¯ä»¥ä½œä¸ºä¸€ä¸ªæ ‡å‡†çš„ HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘å±€åŸŸç½‘å†…çš„å…¶ä»–è®¾å¤‡æä¾›ä»£ç†æœåŠ¡
# >> ä»… iOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œfalseã€æ”¹ä¸ºã€Œtrueã€ï¼Œé»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# >> ä»… macOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œ127.0.0.1ã€æ”¹ä¸ºã€Œ0.0.0.0ã€ï¼Œé»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153
# > å…è®¸çƒ­ç‚¹å…±äº«(ä»… iOSï¼Œä¸ªäººçƒ­ç‚¹å¼€å¯æ—¶ï¼Œå…è®¸å…¶ä»–è®¾å¤‡è®¿é—® Surge ä»£ç†æœåŠ¡)
allow-hotspot-access = true

# --- REMOTE CONTROLLER ---
# > å…è®¸å¤–éƒ¨æ§åˆ¶å™¨è®¿é—® Surgeï¼Œå¹¶é€šè¿‡è¯·æ±‚æŸ¥çœ‹å™¨æˆ– Surge CLI è¿›è¡Œç®¡ç†æ§åˆ¶
#   é»˜è®¤ä»…å…è®¸å¤–éƒ¨æ§åˆ¶å™¨é€šè¿‡ USB è¿›è¡Œæ§åˆ¶ã€‚å¦‚æœæƒ³è¦å…è®¸ç”± Wi-Fi æ§åˆ¶å¯ä»¥å°† 127.0.0.1 æ”¹ä¸º 0.0.0.0
//external-controller-access = key@127.0.0.1:6160
# > HTTP API & Web Dashboard
#   é€šè¿‡ HTTP API æ§åˆ¶ Surge(API key å¿…é¡»å¡«å†™åœ¨æ‰€æœ‰è¯·æ±‚çš„ 'X-Key' çš„ Header ä¸­)
http-api = key@127.0.0.1:6166
# > ä½¿ç”¨ HTTPS æ›¿ä»£ HTTP åè®®ï¼Œéœ€è¦å…ˆé…ç½® MitM çš„ CA è¯ä¹¦ï¼ŒåŒæ—¶éœ€è¦åœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸Šæ‰‹åŠ¨å®‰è£…å¹¶ä¿¡ä»» CA è¯ä¹¦
http-api-tls = false
# > å¼€å¯è¯¥é€‰é¡¹åå¯ä»¥é€šè¿‡æµè§ˆå™¨æ§åˆ¶ Surgeï¼Œæœ¬æœºæµè§ˆå™¨è¾“å…¥127.0.0.1:6166
http-api-web-dashboard = true

# --- COMPATIBILITY (ä»… iOS) ---
# > è¯¥é€‰é¡¹å°†ä½¿å¾—å‘å¾€è¿™äº›åŸŸåæˆ–è€… IP æ®µçš„è¯·æ±‚ç”± Surge VIF è¿›è¡Œå¤„ç†ï¼ˆè€Œä¸æ˜¯ Surge Proxy)ï¼Œè¯¥é€‰é¡¹ç”¨äºä¿®æ­£æŸäº›åº”ç”¨çš„å…¼å®¹æ€§é—®é¢˜
#   0ï¼šç¦ç”¨
#   1ï¼šProxy with Loopback Address
#   2ï¼šProxy Only
#   3ï¼šVIF Only
#   4ï¼šVIF Proxyï¼šä¸ä½¿ç”¨ 127.0.0.1 çš„å›ç¯åœ°å€ä½œä¸ºä»£ç†ï¼Œä½¿ç”¨ VIF çš„è™šæ‹Ÿä»£ç†åœ°å€ï¼Œå°†äº§ç”Ÿé¢å¤–çš„æ€§èƒ½å¼€é”€
#   5ï¼šä¸ä½œä¸ºé»˜è®¤è·¯ç”±ï¼šä¸å£°æ˜ä¸ºé»˜è®¤è·¯ç”±ï¼Œä½†å£°æ˜è‹¥å¹²ä¸ªå°è·¯ç”±ä»¥è¦†ç›–æ‰€æœ‰åœ°å€ï¼ˆä¸ Surge Mac å¢å¼ºæ¨¡å¼è¡Œä¸ºç›¸åŒï¼‰
#   è¿™ç§é…ç½®ä¸‹ç”±äº VIF ä¸æ˜¯ä¸»ç½‘ç»œè®¾å¤‡æ— æ³•é…ç½®ç³»ç»Ÿä»£ç†ã€‚éƒ¨åˆ†åº”ç”¨åœ¨è¯¥æ¨¡å¼ä¸‹ä¼šè®¤ä¸º VPN æœªå¼€å¯ä»¥è§£å†³ç‰¹æ®Šå…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚ HomeKit Security Camera
#   âš ï¸ è¯·ä»…åœ¨æŒ‡å¼•ä¸‹ä½¿ç”¨ï¼Œå¼€å¯åéƒ¨åˆ†åŠŸèƒ½å¯èƒ½æ— æ³•ä½¿ç”¨
compatibility-mode = 0

# --- è·³è¿‡ä»£ç† ---
# > è·³è¿‡æŸä¸ªåŸŸåæˆ–è€… IP æ®µ, è¿™äº›ç›®æ ‡ä¸»æœºå°†ä¸ä¼šç”± Surge Proxy å¤„ç†
skip-proxy = 192.168.0.0/16, 193.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, 127.0.0.1, localhost, *.local

# --- æ’é™¤ç®€å•ä¸»æœºå ---
exclude-simple-hostnames = true

# --- DNS ---
# > å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šçš„ DNS æœåŠ¡å™¨
dns-server = 114.114.114.114, 223.5.5.5, system
# > ä» /etc/hosts è¯»å– DNS è®°å½•
read-etc-hosts = true
# > ENCRYPTED DNS(å¦‚æœé…ç½®äº†åŠ å¯† DNSï¼Œä¼ ç»Ÿ DNS å°†ä»…ç”¨ä½œè§£æ DOH åŸŸåå’Œæµ‹è¯•ç½‘ç»œè¿é€šæ€§)
#   æ”¯æŒçš„åè®®ï¼š
#     DNS over HTTPS: https://doh.pub/dns-query
#     DNS over HTTP/3: h3://example.com
#     DNS over QUIC: quic://example.com
//encrypted-dns-server = https://223.5.5.5/ // é™¤éå½“åœ° ISP æœ‰ä¸¥é‡çš„ DNS æ±¡æŸ“é—®é¢˜ï¼Œå¦åˆ™æ²¡å¿…è¦å¼€å¯ DOHï¼Œä¼ ç»Ÿ DNS çš„æ€§èƒ½æœ€ä¼˜ï¼Œç½‘ç»œå¼‚å¸¸åæ¢å¤é€Ÿåº¦æœ€å¿«
//doh-skip-cert-verification=true // ä¸´æ—¶å…³é—­ DOH çš„æœåŠ¡ç«¯è¯ä¹¦éªŒè¯ï¼ˆè§£å†³ Surge æ— æ³•ä¸ nextdns.io å®Œæˆ TLS æ¡æ‰‹é—®é¢˜ï¼‰
//encrypted-dns-follow-outbound-mode = false // ä½¿åŠ å¯† DNS è¯·æ±‚é€šè¿‡ä»£ç†ç­–ç•¥æ‰§è¡Œ
# > å¼€å¯è¯¥é€‰é¡¹åï¼Œå¦‚æœè®¿é—®çš„åŸŸååœ¨æœ¬åœ°[Host]æœ‰é…ç½® DNS æ˜ å°„ï¼Œsurge å°†ä½¿ç”¨æœ¬åœ°é…ç½®çš„æ˜ å°„ IP åœ°å€è¿›è¡Œè¯·æ±‚ï¼Œä¸åœ¨è¿œç«¯è¿›è¡Œè§£æ
use-local-host-item-for-proxy = true

# --- ADVANCED ---
# > ä»… iOSï¼ŒçŠ¶æ€æ éšè—vpnæ ‡è¯†
//hide-vpn-icon = true
# > log level: verboseã€infoã€notifyã€warning
loglevel = notify
# > å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›é”™è¯¯é¡µ
show-error-page-for-reject = true
# > Always Real IP Hosts(è¿”å›çœŸå® IP)
#   å½“ Surge VIF å¤„ç† DNS é—®é¢˜æ—¶ï¼Œæ­¤é€‰é¡¹è¦æ±‚ Surge è¿”å›ä¸€ä¸ªçœŸæ­£çš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Fake IP
#   DNS æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°ä¸Šæ¸¸ DNS æœåŠ¡å™¨
#   ä¾‹å¦‚ç”±äºæ¸¸æˆä¸»æœºä¼šä½¿ç”¨ STUN æŠ€æœ¯è¿›è¡Œ NAT ç©¿é€ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®æ‰èƒ½æ­£å¸¸å·¥ä½œ
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
# > Hijack DNS
#   é»˜è®¤æƒ…å†µä¸‹ï¼ŒSurge åªå¯¹å‘é€åˆ° Surge DNS åœ°å€(198.18.0.2)çš„ DNS æŸ¥è¯¢è¿”å› Fack IP åœ°å€,å‘é€åˆ°æ ‡å‡† DNS çš„æŸ¥è¯¢å°†è¢«è½¬å‘
#   å¦‚ Google ç³»æ™ºèƒ½ç¡¬ä»¶äº§å“ä¼šæ— è§† DHCP é…ç½®å¼ºè¡Œä½¿ç”¨ 8.8.8.8 å’Œ 8.8.4.4ï¼Œéœ€è¦é…ç½® Surge å¼ºè¡ŒåŠ«æŒæ‰å¯ä»¥æ­£å¸¸å·¥ä½œ
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# > TCP Force HTTP Hosts
#   ä½¿ Surge å°† TCP è¿æ¥è§†ä¸º HTTP è¯·æ±‚ã€‚Surge HTTP å¼•æ“å°†å¤„ç†è¯·æ±‚ï¼Œå¹¶ä¸”æ‰€æœ‰é«˜çº§åŠŸèƒ½éƒ½å°†å¯ç”¨ï¼Œå¦‚æˆªå–ã€é‡å†™å’Œè„šæœ¬
#   æ”¯æŒé€šé…ç¬¦ * åŠ ?ï¼›ä½¿ç”¨å‰ç¼€ - æ’é™¤ä¸»æœºåï¼›
#   é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯¹ 80 ç«¯å£çš„è¯·æ±‚è¿›è¡Œå¤„ç†ï¼ˆä½¿ç”¨ example.com:443 æŒ‡å®šç«¯å£æˆ– example.com:0 è¡¨ç¤ºæ‰€æœ‰ç«¯å£ï¼‰ï¼›
#   <ip-address> è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä¸»æœºåä¸º IP åœ°å€çš„è¿æ¥ï¼›
#   <ipv4-address> è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä¸»æœºåä¸º IPv4 åœ°å€çš„è¿æ¥ï¼›
#   <ipv6-address> è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä¸»æœºåä¸º IPv6 åœ°å€çš„è¿æ¥ã€‚
force-http-engine-hosts = *.ott.cibntv.net, 123.59.31.1,119.18.193.135, 122.14.246.33, 175.102.178.52, 116.253.24.*, 175.6.26.*, 220.169.153.*
# > VIF Excluded Routes(ç»•è¿‡ç‰¹å®š IP èŒƒå›´)
//tun-excluded-routes = 239.255.255.250/32
# > VIF Included Routes(åŒ…å«ç‰¹å®š IP èŒƒå›´)
//tun-included-routes = 192.168.1.12/32
# > å½“ Wi-Fi ä¸æ˜¯é¦–é€‰ç½‘ç»œæ—¶ SSID ç»„ç­–ç•¥ä½¿ç”¨é»˜è®¤ç­–ç•¥
use-default-policy-if-wifi-not-primary = false
# > æ§åˆ¶å½“ UDP æµé‡è¢«åŒ¹é…åˆ°ä¸€ä¸ªä¸æ”¯æŒ UDP è½¬å‘çš„ç­–ç•¥æ—¶çš„è¡Œä¸º
#   DIRECTï¼šå›é€€åˆ° DIRECT ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰
#   REJECTï¼šå›é€€åˆ° REJECT ç­–ç•¥
udp-policy-not-supported-behaviour = REJECT


[Replica]
# æŠ“å–æµé‡ => è¿‡æ»¤å™¨ 1ä¸ºå¼€å¯ï¼Œ0ä¸ºå…³é—­
# > éšè— Apple è¯·æ±‚
hide-apple-request = 1
# > éšè—å´©æºƒè¿½è¸ªå™¨è¯·æ±‚
hide-crash-reporter-request = 1
# > éšè— UDP ä¼šè¯
hide-udp = 0
# > å…³é”®è¯è¿‡æ»¤å™¨
#   noneï¼ˆå…³é—­å…³é”®è¯è¿‡æ»¤å™¨ï¼‰ / whitelistï¼ˆblacklistï¼ˆä»…è®°å½•åŒ…å«å…³é”®å­—çš„è¯·æ±‚ï¼‰ï¼‰ / blacklistï¼ˆä»…è®°å½•ä¸åŒ…å«å…³é”®å­—çš„è¯·æ±‚ï¼‰ / patternï¼ˆåŒ¹é…é€šé…ç¬¦çš„è¯·æ±‚ï¼‰
keyword-filter-type = none
# > å…³é”®è¯
keyword-filter = (null)


[Proxy]
#!include ProxyChain.dconf, TAG.conf


[Proxy Group]
# ç­–ç•¥ç»„ç±»å‹: "select", "url-test", "fallback", "ssid" å’Œ "load-balance"

# --- CUSTOM PROXY GROUP ---
Proxy = select, include-all-proxies=true
//Subnet = subnet, default = Proxy, SSID:MyHome = DIRECT, TYPE:CELLULAR = Proxy // ç”± SUBNET è§„åˆ™æ›¿ä»£
PayPal = select, policy-path=ProxyChain.dconf
OpenAI = select, include-other-group=Proxy, policy-regex-filter=ğŸ‡ºğŸ‡¸|ğŸ‡­ğŸ‡°
Apple = select, DIRECT, include-other-group=Proxy, policy-regex-filter=ğŸ‡ºğŸ‡¸
Streaming = url-test, include-other-group=Proxy, policy-regex-filter=ğŸ‡­ğŸ‡°|ğŸ‡¸ğŸ‡¬|ğŸ‡¯ğŸ‡µ
Netflix = select, include-other-group=Proxy, policy-regex-filter=ğŸ‡­ğŸ‡°|ğŸ‡¸ğŸ‡¬|ğŸ‡¯ğŸ‡µ
Disney+ = select, include-other-group=Proxy, policy-regex-filter=ğŸ‡­ğŸ‡°|ğŸ‡¸ğŸ‡¬|ğŸ‡¯ğŸ‡µ
TikTok = select, include-other-group=Proxy, policy-regex-filter=ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸
Spotify = select, DIRECT, include-other-group=Proxy, policy-regex-filter=ğŸ‡­ğŸ‡°|ğŸ‡µğŸ‡­|ğŸ‡®ğŸ‡³|ğŸ‡¹ğŸ‡·
Advertising = select, DIRECT, REJECT
# > ç™½åå•æ¨¡å¼ PROXYï¼Œé»‘åå•æ¨¡å¼ DIRECT
Final = select, Proxy, DIRECT

# --- SUBSCRIBE PROXY GROUP ---
# > TAG
TAG = select, policy-path=TAG.conf
# > WgetCloud
//WgetCloud = select, policy-path=WgetCloud.conf


[Rule]
# --- CUSTOM RULES ---
# > è™šæ‹Ÿæœº
SRC-IP,10.37.129.3,Proxy
# > Chrome AHA Music æ‰©å±•
DOMAIN,extension.doreso.com,DIRECT
# > Sub-Store çš„ Web é¡µé¢
DOMAIN-SUFFIX,vercel.app,Proxy

# > SUBNET è§„åˆ™
SUBNET,SSID:MyHome,DIRECT
SUBNET,TYPE:CELLULAR,Proxy

# REJECT-NO-DROP è¡¨ç¤ºä¸ä½¿ç”¨é»˜è®¤çš„è‡ªåŠ¨ä¸¢åŒ…é€»è¾‘ï¼Œè¿™æ · Surge æ¯æ¬¡éƒ½ä¼šè¿”å› ICMP Port Unreachableï¼Œåº”ç”¨ä¼šç«‹åˆ»å›é€€è€Œä¸æ˜¯ç­‰è¶…æ—¶ã€‚
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP

# > Download(For MacOS)
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,fdm,DIRECT
PROCESS-NAME,Folx,DIRECT
PROCESS-NAME,NetTransport,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,Transmission,DIRECT
PROCESS-NAME,uTorrent,DIRECT
PROCESS-NAME,WebTorrent,DIRECT
PROCESS-NAME,WebTorrent Helper,DIRECT

# Advertising å±è”½
RULE-SET,https://raw.githubusercontent.com/NobyDa/Script/master/Surge/AdRule.list,Advertising
# PayPal
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,PayPal
# OpenAI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OpenAI/OpenAI.list,OpenAI
# Github
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,Proxy
# TikTok
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list,TikTok
# Netflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,Netflix
# Disney+
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list,Disney+
# Spotify
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list,Spotify
# YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,Streaming
# Streaming å›½é™…æµåª’ä½“æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list,Streaming
# Global å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list,Proxy
# Apple æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list,Apple
# China ä¸­å›½ç›´è¿
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list,DIRECT
# > Local Area Network & GeoIP China
OR,((RULE-SET,SYSTEM), (RULE-SET,LAN), (GEOIP,CN)),DIRECT
# > ä»¥ä¸Šè§„åˆ™æœªåŒ…å«çš„å…¶ä»–è®¿é—®
FINAL,Final,dns-failed


[Host]
# å®šä¹‰æœ¬åœ° DNS æ˜ å°„è®°å½•ï¼Œè¯¥åŠŸèƒ½ç­‰åŒäº /etc/hostsï¼ŒåŠ ä¸Šäº†æ³›è§£æå’Œåˆ«åæ”¯æŒ
# > Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188

# > Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29

# > Router Admin Panel
amplifi.lan = server:syslib // Ubiquiti Amplifi Router
router.synology.com = server:syslib // Synology Router
sila.razer.com = server:syslib // Razer Sila Router
router.asus.com = server:syslib // Asus Router
routerlogin.net = server:syslib // Netgear Router
orbilogin.com = server:syslib // Netgear Obri Router
www.LinksysSmartWiFi.com = server:syslib // Linksys Router
LinksysSmartWiFi.com = server:syslib // Linksys Router
myrouter.local = server:syslib // Linksys Router
www.miwifi.com = server:syslib // Xiaomi Mi WiFi Router
miwifi.com = server:syslib // Xiaomi Mi WiFi Router
mediarouter.home = server:syslib // Huawei Router
tplogin.cn = server:syslib // TP-Link Router
tplinklogin.net = server:syslib // TP-Link Router
melogin.cn = server:syslib // MERCURY Router
falogin.cn = server:syslib // FAST Router


# è¯¥æ®µå®šä¹‰é’ˆå¯¹ HTTP è¯·æ±‚çš„ URL é‡å®šå‘è§„åˆ™(æœ‰ä¸¤ç§é‡å®šå‘æ–¹å¼: "header" å’Œ "302")
#   Header æ¨¡å¼:
#       Surge ä¼šä¿®æ”¹å‘å‡ºçš„ http headerï¼Œå¿…è¦æ—¶è¿˜ä¼šä¿®æ”¹ Host å­—æ®µã€‚å®¢æˆ·ç«¯å°†æ„ŸçŸ¥ä¸åˆ°è¿™ä¸ªé‡å®šå‘è¿‡ç¨‹. ä¸æ”¯æŒé‡å®šå‘åˆ°ä¸€ä¸ª HTTPS çš„åœ°å€ã€‚
#   302 æ¨¡å¼:
#       Surge ç›´æ¥ç®€å•çš„è¿”å›ä¸€ä¸ª 302 é‡å®šå‘å›åº”
[URL Rewrite]
# > Redirect Google Search Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302

# > Redirect Google Maps Service
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302

# > Redirect HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com\/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com\/ https://yhd.com/ 302

# > AbeamTV header
^https?:\/\/api\.abema\.io\/v\d\/ip\/check - reject

# > CUSTOM URL header


[Header Rewrite]
^https?:\/\/.*\.zhihu\.com\/(question|topic) header-replace User-Agent "osee2unifiedRelease/4432 osee2unifiedReleaseVersion/7.8.0 Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mo    bile/15E148"

# ä¸ºæŸäº›ç‰¹å®šçš„ WiFi ç½‘ç»œè®¾ç½®è®¾ç½®å‚æ•°
# SSID Setting æ®µè¡¨è¾¾å¼ï¼ˆé€‚ç”¨ SUBNET è§„åˆ™ï¼‰
#   MCCMNC:100-200 åŒ¹é…ç‰¹å®šæ•°æ®ç½‘ç»œ
#   SSID:value ç‰¹å®šåŒ¹é… SSIDï¼Œæ”¯æŒé€šé…ç¬¦
#   BSSID:value ç‰¹å®šåŒ¹é… BSSIDï¼Œæ”¯æŒé€šé…ç¬¦
#   ROUTER:value ç‰¹å®šåŒ¹é…è·¯ç”±åœ°å€
#   TYPE:WIFI åŒ¹é…æ‰€æœ‰ WiFi ç½‘ç»œ
#   TYPE:CELLULAR åŒ¹é…æ‰€æœ‰æ•°æ®ç½‘ç»œ
#   TYPE:WIRED åŒ¹é…æ‰€æœ‰æœ‰çº¿ç½‘ç»œï¼ˆiOS ä¸Šæ”¯æŒ USB ç½‘ç»œé€‚é…
[SSID Setting]
# > åœ¨è¯¥ç½‘ç»œä¸‹ Surge å°†æš‚åœå·¥ä½œ
#   è¯·æ³¨æ„ï¼Œå¦‚æœä½ åœ¨è¯¥ç½‘ç»œä¸‹ç›´æ¥å¯åŠ¨ Surge é‚£ä¹ˆ Surge ä¾ç„¶ä¼šå·¥ä½œï¼Œåªæœ‰å½“ä»å…¶ä»–ç½‘ç»œåˆ‡æ¢åˆ°è¯¥ç½‘ç»œæ—¶ï¼ŒSurge æ‰ä¼šæš‚åœ
SSID:MyHome suspend=true
# > TCP Fast Open
SSID:MyHome tfo-behaviour=force-enabled
# > ä¸­å›½ç”¨æˆ·è‹¥ä½¿ç”¨ TFO å»ºè®®å¼ºåˆ¶å…³é—­æ•°æ®ç½‘ç»œä¸Šçš„ TFOï¼Œé¿å…äº§ç”Ÿé—®é¢˜ï¼Œç„¶ååœ¨å·²æµ‹è¯•è¿‡çš„ç½‘ç»œä¸Šå¼ºåˆ¶å¼€å¯ã€‚åªæœ‰è¿™æ ·é…ç½®åæ–¹å¯å……åˆ†äº«å— TFO çš„ä¼˜åŠ¿
TYPE:CELLULAR tfo-behaviour=force-disabled

[MITM]
# > è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = true
# > MITM over HTTP/2(ä½¿ç”¨ HTTP/2 åè®®è¿›è¡Œ MITM è§£å¯†ï¼Œå¯åœ¨é«˜å¹¶å‘ä¸‹ä¼˜åŒ–æ€§èƒ½)
h2 = true
# > é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰é€šè¿‡ Surge HTTP ä»£ç†çš„è¿æ¥æ‰ä¼šä½¿ç”¨ MITM è§£å¯†ã€‚å¯ç”¨è¯¥é€‰é¡¹ä»¥å‘ŠçŸ¥ Surge åœ¨é€šè¿‡ Surge VIFï¼ˆå¢å¼ºæ¨¡å¼ï¼‰çš„åŸå§‹ TCP è¿æ¥ä¸Šæ‰§è¡Œ MITMã€‚
#   è¯·æ³¨æ„ï¼Œæ‚¨ä»ç„¶éœ€è¦å¡«å†™åˆ—è¡¨ä¸­çš„ä¸»æœºå
tcp-connection = true

# > ä¸»æœºå(Surge ä»…ä¼šè§£å¯†è¿™é‡ŒæŒ‡å®šçš„ä¸»æœºåçš„è¯·æ±‚ï¼Œios ç³»ç»Ÿå’ŒæŸäº›åº”ç”¨æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œä»…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è¯ä¹¦ï¼Œå¯¹è¿™äº›åŸŸåå¯åŠ¨è§£å¯†å¯èƒ½å¯¼è‡´é—®é¢˜ï¼Œå¦‚ *apple.com, *icloud.com)
hostname = www.google.cn, api.abema.io, *.zhihu.com, -CUSTOMMitM

[Script]
# Flush DNS, show the DNS delay and server.
flushDNS = type=generic,timeout=10,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/flushDNS.js,argument=icon=wand.and.stars.inverse&color=#3d3d5b

[Panel]
flushDNS = script-name=flushDNS,update-interval=-1

