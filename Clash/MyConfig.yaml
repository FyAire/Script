#---------------------------------------------------#

## å®˜æ–¹Githubæ–‡æ¡£ https://dreamacro.github.io/clash/zh_CN/

#---------------------------------------------------#


# HTTP(S) ä»£ç†æœåŠ¡ç«¯å£
port: 7890

# SOCKS5 ä»£ç†æœåŠ¡ç«¯å£
socks-port: 7891

# Linux å’Œ macOS çš„é€æ˜ä»£ç†æœåŠ¡ç«¯å£ (TCP å’Œ TProxy UDP é‡å®šå‘)
# redir-port: 7892

# Linux çš„é€æ˜ä»£ç†æœåŠ¡ç«¯å£ (TProxy TCP å’Œ TProxy UDP)
# tproxy-port: 7893

# HTTP(S) å’Œ SOCKS4(A)/SOCKS5 ä»£ç†æœåŠ¡å…±ç”¨ä¸€ä¸ªç«¯å£
#mixed-port: 7890

# æœ¬åœ° SOCKS5/HTTP(S) ä»£ç†æœåŠ¡çš„è®¤è¯
# authentication:
#  - "user1:pass1"
#  - "user2:pass2"

# è®¾ç½®ä¸º true ä»¥å…è®¸æ¥è‡ªå…¶ä»– LAN IP åœ°å€çš„è¿æ¥
allow-lan: true

# ä»…å½“ `allow-lan` ä¸º `true` æ—¶æœ‰æ•ˆ
# '*': ç»‘å®šæ‰€æœ‰ IP åœ°å€
# 192.168.122.11: ç»‘å®šå•ä¸ª IPv4 åœ°å€
# "[aaaa::a8aa:ff:fe09:57d8]": ç»‘å®šå•ä¸ª IPv6 åœ°å€
bind-address: '*'

# Clash è·¯ç”±å·¥ä½œæ¨¡å¼
# rule: åŸºäºè§„åˆ™çš„æ•°æ®åŒ…è·¯ç”±
# global: æ‰€æœ‰æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°å•ä¸ªèŠ‚ç‚¹
# direct: ç›´æ¥å°†æ•°æ®åŒ…è½¬å‘åˆ°äº’è”ç½‘
mode: rule

# é»˜è®¤æƒ…å†µä¸‹, Clash å°†æ—¥å¿—æ‰“å°åˆ° STDOUT
# æ—¥å¿—çº§åˆ«: info / warning / error / debug / silent
log-level: info

# å½“è®¾ç½®ä¸º false æ—¶, è§£æå™¨ä¸ä¼šå°†ä¸»æœºåè§£æä¸º IPv6 åœ°å€
ipv6: true

# RESTful Web API ç›‘å¬åœ°å€
external-controller: 127.0.0.1:9090

# é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–é™æ€ Web èµ„æºç›®å½•çš„ç»å¯¹è·¯å¾„. Clash core å°†åœ¨
# `http://{{external-controller}}/ui` ä¸­æä¾›æœåŠ¡.
# æˆ–è€…ç›´æ¥è®¿é—®é»˜è®¤åœ°å€ http://clash.razord.top
#external-ui: folder

# RESTful API å¯†é’¥ (å¯é€‰)
# é€šè¿‡æŒ‡å®š HTTP å¤´ `Authorization: Bearer ${secret}` è¿›è¡Œèº«ä»½éªŒè¯
# å¦‚æœRESTful APIåœ¨ 0.0.0.0 ä¸Šç›‘å¬, åŠ¡å¿…è®¾ç½®ä¸€ä¸ª secret å¯†é’¥.
#secret: ""

# å‡ºç«™æ¥å£åç§°
interface-name: en0

# fwmark (ä»…åœ¨ Linux ä¸Šæœ‰æ•ˆ)
# routing-mark: 6666

# ç”¨äºDNSæœåŠ¡å™¨å’Œè¿æ¥å»ºç«‹çš„é™æ€ä¸»æœº (å¦‚/etc/hosts) .
#
# æ”¯æŒé€šé…ç¬¦ä¸»æœºå (ä¾‹å¦‚ *.clash.dev, *.foo.*.example.com)
# éé€šé…ç¬¦åŸŸåä¼˜å…ˆçº§é«˜äºé€šé…ç¬¦åŸŸå
# ä¾‹å¦‚ foo.example.com > *.example.com > .example.com
# P.S. +.foo.com ç­‰äº .foo.com å’Œ foo.com
hosts:
  # Firebase Cloud Messaging
  'mtalk.google.com': 108.177.125.188
  # Google Dl
  'dl.google.com': 119.29.29.29
  'dl.l.google.com': 119.29.29.29
  'update.googleapis.com': 119.29.29.29

# profile:
  # å°† `select` æ‰‹åŠ¨é€‰æ‹© ç»“æœå­˜å‚¨åœ¨ $HOME/.config/clash/.cache ä¸­
  # å¦‚æœä¸éœ€è¦æ­¤è¡Œä¸º, è¯·è®¾ç½®ä¸º false
  # å½“ä¸¤ä¸ªä¸åŒçš„é…ç½®å…·æœ‰åŒåçš„ç»„æ—¶, å°†å…±äº«æ‰€é€‰å€¼
  # store-selected: true

  # æŒä¹…åŒ– fakeip
  # store-fake-ip: false

# DNS æœåŠ¡è®¾ç½®
# æ­¤éƒ¨åˆ†æ˜¯å¯é€‰çš„. å½“ä¸å­˜åœ¨æ—¶, DNS æœåŠ¡å°†è¢«ç¦ç”¨.
dns:
  enable: true
  listen: 0.0.0.0:53
  # ipv6: false # å½“ä¸º false æ—¶, AAAA æŸ¥è¯¢çš„å“åº”å°†ä¸ºç©º

  # ç”±äºè¿æ¥åˆ°åŠ å¯† DNS æœåŠ¡æ—¶ï¼Œéœ€è¦è§£ææœåŠ¡å™¨æœ¬èº«çš„åŸŸåï¼Œå› æ­¤éœ€è¦æŒ‡å®šä¸€äº›ç›¸å¯¹å¹²å‡€çš„å›½å†… æ˜æ–‡ DNS æœåŠ¡å™¨åœ°å€
  default-nameserver:
    - 114.114.114.114
    - 8.8.8.8
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16 # Fake IP åœ°å€æ±  CIDR
  # use-hosts: true # æŸ¥æ‰¾ hosts å¹¶è¿”å› IP è®°å½•

  # search-domains: [local] # A/AAAA è®°å½•çš„æœç´¢åŸŸ

  # æ­¤åˆ—è¡¨ä¸­çš„ä¸»æœºåå°†ä¸ä¼šä½¿ç”¨ Fake IP è§£æ
  # å³, å¯¹è¿™äº›åŸŸåçš„è¯·æ±‚å°†å§‹ç»ˆä½¿ç”¨å…¶çœŸå® IP åœ°å€è¿›è¡Œå“åº”
  # fake-ip-filter:
  #   - '*.lan'
  #   - localhost.ptlogin2.qq.com

  # æŒ‡å®šè§£æå›½å†…åŸŸåæ—¶ä½¿ç”¨çš„åŠ å¯† DNS æœåŠ¡å™¨åœ°å€
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - tls://dns.rubyfish.cn:853

  # æŒ‡å®šè§£æå›½å¤–åŸŸåæ—¶ä½¿ç”¨çš„åŠ å¯† DNS æœåŠ¡å™¨åœ°å€ï¼Œå¹¶è®¾ç½®åˆ†æµè§„åˆ™
  fallback:
    - https://1.1.1.1/dns-query
    - https://9.9.9.9/dns-query
    - https://dns.google/dns-query

  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'

  # é€šè¿‡ç‰¹å®šçš„åç§°æœåŠ¡å™¨æŸ¥æ‰¾åŸŸå
  # nameserver-policy:
  #   'www.baidu.com': '114.114.114.114'
  #   '+.internal.crop.com': '10.0.0.1'

proxies:
  # socks5
  - name: "Miami"
    type: socks5
    server: 209.209.52.71
    port: 2333
    username: fya123
    password: abc123

proxy-groups:
  # select æ‰‹åŠ¨é€‰æ‹©, ç”¨äºé€‰æ‹©ä»£ç†æˆ–ç­–ç•¥ç»„
  # æ‚¨å¯ä»¥ä½¿ç”¨ RESTful API æ¥åˆ‡æ¢ä»£ç†, å»ºè®®åœ¨GUIä¸­åˆ‡æ¢.
  - name: "Proxy"
    type: select
    proxies:
      - DIRECT
      - Miami
    use:
      - TAG

  # ä¸­ç»§é“¾è·¯ä»£ç†èŠ‚ç‚¹. èŠ‚ç‚¹ä¸åº”åŒ…å«ä¸­ç»§. ä¸æ”¯æŒ UDP.
  # æµé‡èŠ‚ç‚¹é“¾è·¯: clash <-> http <-> vmess <-> ss1 <-> ss2 <-> Internet
  - name: "Paypal"
    type: relay
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ 03ä¸¨1x HK
      - Miami

  - name: "OpenAI"
    type: select
    filter: 'ğŸ‡ºğŸ‡¸|ğŸ‡­ğŸ‡°'
    use:
      - TAG

  - name: "TikTok"
    type: select
    filter: 'ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸'
    use:
      - TAG

  - name: "Netflix"
    type: select
    filter: 'ğŸ‡­ğŸ‡°|ğŸ‡¸ğŸ‡¬|ğŸ‡¯ğŸ‡µ'
    use:
      - TAG

  - name: "Disney+"
    type: select
    filter: 'ğŸ‡­ğŸ‡°|ğŸ‡µğŸ‡­|ğŸ‡®ğŸ‡³|ğŸ‡¹ğŸ‡·'
    use:
      - TAG

  - name: "Spotify"
    type: select
    filter: 'ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸'
    proxies:
      - DIRECT
    use:
      - TAG

  # url-test é€šè¿‡å¯¹ æŒ‡å®šURL è¿›è¡ŒåŸºå‡†é€Ÿåº¦æµ‹è¯•æ¥é€‰æ‹©å°†ä½¿ç”¨å“ªä¸ªä»£ç†.
  - name: "Streaming"
    type: url-test
    filter: 'ğŸ‡­ğŸ‡°|ğŸ‡¸ğŸ‡¬|ğŸ‡¯ğŸ‡µ'
    use:
      - TAG
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: Twitter
    type: select
    filter: 'ç¾å›½'
    use:
      - TAG

  - name: "Apple"
    type: select
    filter: 'ğŸ‡ºğŸ‡¸'
    proxies:
      - DIRECT
    use:
      - TAG

  - name: "Advertising"
    type: select
    filter: 'ğŸ‡ºğŸ‡¸'
    proxies:
      - DIRECT
      - REJECT

  - name: "Final"
    type: select
    proxies:
      - DIRECT
    use:
      - Proxy

proxy-providers:
  TAG:
    type: http
    url: https://tagcdnsub.work/api/v1/client/subscribe?token=4d4c59588c05c46f743140c8637be26a
    interval: 3600
    path: ./profiles/proxies/TAG.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# è§„åˆ™é›†
rule-providers:
  # å¹¿å‘ŠåŸŸååˆ—è¡¨
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./profiles/rules/reject.yaml
    interval: 86400
  # è¿è¥å•†åŠ«æŒæˆ–æ¶æ„ç½‘ç«™
  Hijacking:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/Hijacking.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/Hijacking.yaml
    interval: 86400
  # éœ€è¦ç›´è¿çš„å¸¸è§è½¯ä»¶åˆ—è¡¨
  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./profiles/rules/applications.yaml
    interval: 86400
  # ç§æœ‰ç½‘ç»œä¸“ç”¨åŸŸååˆ—è¡¨
  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./profiles/rules/private.yaml
    interval: 86400
  # Paypal åˆ—è¡¨
  Paypal:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/Paypal.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/Paypal.yaml
    interval: 86400
  # OpenAI åˆ—è¡¨
  OpenAI:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/OpenAI.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/OpenAI.yaml
    interval: 86400
  # TikTok åˆ—è¡¨
  TikTok:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/TikTok.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/TikTok.yaml
    interval: 86400
  # Netflix åˆ—è¡¨
  Netflix:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/Netflix.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/Netflix.yaml
    interval: 86400
  # Disney+ åˆ—è¡¨
  Disney+:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/Disney+.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/Disney+.yaml
    interval: 86400
  # Spotify åˆ—è¡¨
  Spotify:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/Spotify.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/Spotify.yaml
    interval: 86400
  # Streaming å›½é™…æµåª’ä½“æœåŠ¡
  Streaming:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/Streaming.yaml?token=GHSAT0AAAAAACHCJGSW6M4PVUOXYQ3ORCV4ZIQJLDQ"
    path: ./profiles/rules/Streaming.yaml
    interval: 86400
  # Twitter åˆ—è¡¨
  Twitter:
    type: http
    behavior: classical
    url: https://ghproxy.com/https://raw.githubusercontent.com/FyAire/Script/main/Clash/rules/Twitter.yaml
    path: ./profiles/rules/Twitter.yaml
    interval: 86400
  # iCloud åŸŸååˆ—è¡¨
  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./profiles/rules/icloud.yaml
    interval: 86400
  # Apple åŸŸååˆ—è¡¨
  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./profiles/rules/apple.yaml
    interval: 86400
  # ä»£ç†åŸŸååˆ—è¡¨
  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./profiles/rules/proxy.yaml
    interval: 86400
  # ä¸­å›½å¤§é™† IP åœ°å€åˆ—è¡¨
  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./profiles/rules/cncidr.yaml
    interval: 86400

rules:
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,reject,Advertising
  - RULE-SET,Hijacking,Advertising
  - RULE-SET,applications,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,Paypal,Paypal
  - RULE-SET,OpenAI,OpenAI
  - RULE-SET,TikTok,TikTok
  - RULE-SET,Netflix,Netflix
  - RULE-SET,Disney+,Disney+
  - RULE-SET,Spotify,Spotify
  - RULE-SET,Streaming,Streaming
  - RULE-SET,Twitter,Twitter
  - RULE-SET,icloud,Apple
  - RULE-SET,apple,Apple
  - RULE-SET,proxy,Proxy
  - RULE-SET,cncidr,DIRECT
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,PROXY